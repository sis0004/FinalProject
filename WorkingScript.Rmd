### Install packages
```{r}
library(tidyverse)
library(base)
```

### Enter Field data

I had to do some manual data entry in Excel to set up the field data in the format I wanted it to be in. I decided to do this instead of trying to import from a PDF and manually manipulating from there. 

```{r}
FieldData <- data.frame("Sample" = c(NA, NA, NA, NA, "KCB 1", "KCB 2", "KCB 3", "KCB 4", "KCB 5", "KCB 6", "KCB 7", "KCB 8", "KCB 9", "KCB 10", "KCB 11"),
           "Location" = c(NA, NA, NA, NA, "Gneiss Lake", "Lake Magic I", "Lake Magic II", "Lake Aerodrome", "Twin Lake West", "Salar Gorbea site 7", "Salar Gorbea site 10","Salar Ignorado site 3", "Saline Valley", "Bonneville Salt Flats", "Crosbie Lake"),
           "Country" = c(NA, NA, NA, NA, "Australia", "Australia", "Australia", "Australia", "Australia", "Chile", "Chile", "Chile", "USA", "USA", "Canada"),
           "Year Collected" = c(NA, NA, NA, NA,2015, 2015, 2015, 2009, 2009, 2009, 2007, 2007, NA, NA, NA),
           "Water Depth (cm)" = c(NA, NA, NA, NA,2.5, 2.5, 5, 1.2, 10, 1, 2, 10, NA, NA, NA),
           "Water Color" = c(NA, NA, NA, NA,"Yellow","Yellow", "Yellow", "Yellow", "Green", "Clear", "Pink", "Clear", NA, NA, NA),
           "pH" = c(NA, NA, NA, NA,1.4, 2, 1.6, 1.8, 2.6, 2.7, 1.8, 3.8, NA, NA, NA),
           "Salinity (%TDS)" = c(NA, NA, NA, NA,32, 30, 30, 29, 27, 28, 18, 5, NA, NA, NA),
           "Latitude" = c(NA, NA, NA, NA,-33.21984, -32.43031 ,-32.42846, -32.20949, -33.05573, -25.42514, -25.42161, -25.49993,NA,NA,NA),
           "Longitude" = c(NA, NA, NA, NA,121.75405, 118.90505, 118.90552, 121.76072, 121.67550, -68.68759, -68.69366, -69.62456,NA,NA,NA),
            stringsAsFactors = FALSE)

write.csv(FieldData, "/Users/saraschredergomes/Desktop/GEOG693/FinalProject/FieldData.csv", row.names = FALSE)
```


### config lab raw data

```{r}
LabData <- read.csv("/Users/saraschredergomes/Desktop/GEOG693/FinalProject/BrineCompostions_ActLabsResults_RAWData.csv")
LabData <- as.data.frame(read.csv("/Users/saraschredergomes/Desktop/GEOG693/FinalProject/BrineCompostions_ActLabsResults_RAWData.csv"), header= FALSE, sep= ",", dec = ".", col.names = NULL, stringsAsFactors = FALSE) # stringsasFactors doesnt seem to be working
```

```{r}
MajorIonLabData <- LabData %>% select(Sample,Analyte.Symbol, Na, Si, Fe, As, Cu, Cl, Mg, Ca, K, Br, SO4) #choose the ion concentrations for analysis. This makes it easy to add analytes to the shorter data frame at a later point.
```

```{r}
REELabData <- LabData %>% select(Sample,Analyte.Symbol, Ce, Dy, Er, Eu, Gd, Ho, La, Lu, Nd, Pr, Sm, Sc,Tb, Tm, Yb, Y) #choose the ion concentrations for analysis. This makes it easy to add analytes to the shorter data frame at a later point.
```

--- I think any calculations will have to be done of subsets of the data. Subset, change to numeric, execture calcualation, and then append the data frame. 

--- Making site map, need states for Australia - code?

Plots: pH v. Al (each lake different color)
        pH v. Si (each lake different color)
        etc.
        Maybe, for each lake plot pH v. series of rare earth elements to see if there is one that stands out?
        Using base R: Dot plots? http://www.sthda.com/english/wiki/dot-charts-r-base-graphs

```{r} 
#merge LabData and FieldData to one df
#to be done after unit conversions
# need a fix to include samples 9-11?
TestMerge <- merge(FieldData, BasicLabData, by.x = "Sample", by.y = "Sample")
```

Make df and pull seawater data
Compare to LabData in plot


-------------------------------------------------------------------------------------

### Site Map for Australia Lakes
```{r}
library("ggplot2")
theme_set(theme_bw())
library("sf")
library("rnaturalearth")
library("rnaturalearthdata")
library("rgeos")
library("ggspatial")
library("maps")
library("lwgeom") 
library("oz") #install necessary packages for site map ----- I dont need all of these??
```


```{r}
 site_id <- c("Gneiss Lake", "Lake Magic I", "Lake Magic II", "Lake Aerodrome", "Twin Lake West")
     siteLongs <- c(121.75405, 118.90505, 118.90552, 121.76072, 121.67550)
     siteLats <- c(-33.21984, -32.43031 ,-32.42846, -32.20949, -33.05573)
     sites <- data.frame(site_id = site_id, longitude = siteLongs, latitude = siteLats)
```

```{r}
world <- ne_countries(scale = "medium", returnclass = "sf")
class(world)
```

 Inset larger australia map??
```{r}
ggplot(data = world) +
    geom_sf() +
    geom_point(data = sites, aes(x = longitude, y = latitude), size = 4, 
        shape = 16, color = "darkred") +
    coord_sf(xlim = c(116, 123), ylim = c(-30, -35), expand = FALSE)
```
```{r}
ggplot(data = world) +
    geom_sf() +
    geom_point(data = sites, aes(x = longitude, y = latitude), size = 4, 
        shape = 16, color = "darkred") +
    coord_sf(xlim = NULL, ylim = NULL, expand = FALSE)
```

```{r}
(sites <- st_as_sf(sites, coords = c("longitude", "latitude"), 
    crs = 3112, agr = "constant"))
# is 3112 the right code?
ggplot(data = world) +
    geom_sf() +
    geom_sf(data = sites, size = 4, shape = 16, color = "darkred") +
    coord_sf(xlim = NULL, ylim = NULL, expand = FALSE) +
    geom_sf_label(data=sites, aes(label = site_id), nudge_y = 0.3) +
    coord_sf(xlim = NULL, ylim = NULL, expand = FALSE)
```     