### Install packages
```{r}
library(tidyverse)
library(base)
```

### Enter Field data

I had to do some manual data entry in Excel to set up the field data in the format I wanted it to be in. I decided to do this instead of trying to import from a PDF and manually manipulating from there. 

```{r}
FieldData <- data.frame("Sample" = c(NA, NA, NA, NA, "KCB 1", "KCB 2", "KCB 3", "KCB 4", "KCB 5", "KCB 6", "KCB 7", "KCB 8", "KCB 9", "KCB 10", "KCB 11"),
           "Location" = c(NA, NA, NA, NA, "Gneiss Lake", "Lake Magic I", "Lake Magic II", "Lake Aerodrome", "Twin Lake West", "Salar Gorbea site 7", "Salar Gorbea site 10","Salar Ignorado site 3", "Saline Valley", "Bonneville Salt Flats", "Crosbie Lake"),
           "Country" = c(NA, NA, NA, NA, "Australia", "Australia", "Australia", "Australia", "Australia", "Chile", "Chile", "Chile", "USA", "USA", "Canada"),
           "Year Collected" = c(NA, NA, NA, NA,2015, 2015, 2015, 2009, 2009, 2009, 2007, 2007, NA, NA, NA),
           "Water Depth (cm)" = c(NA, NA, NA, NA,2.5, 2.5, 5, 1.2, 10, 1, 2, 10, NA, NA, NA),
           "Water Color" = c(NA, NA, NA, NA,"Yellow","Yellow", "Yellow", "Yellow", "Green", "Clear", "Pink", "Clear", NA, NA, NA),
           "pH" = c(NA, NA, NA, NA,1.4, 2, 1.6, 1.8, 2.6, 2.7, 1.8, 3.8, NA, NA, NA),
           "Salinity (%TDS)" = c(NA, NA, NA, NA,32, 30, 30, 29, 27, 28, 18, 5, NA, NA, NA),
           "Latitude" = c(NA, NA, NA, NA,-33.21984, -32.43031 ,-32.42846, -32.20949, -33.05573, -25.42514, -25.42161, -25.49993,NA,NA,NA),
           "Longitude" = c(NA, NA, NA, NA,121.75405, 118.90505, 118.90552, 121.76072, 121.67550, -68.68759, -68.69366, -69.62456,NA,NA,NA),
            stringsAsFactors = FALSE)

write.csv(FieldData, "/Users/saraschredergomes/Desktop/GEOG693/FinalProject/FieldData.csv", row.names = FALSE)
```


### config raw lab data

```{r}

LabData <- as.data.frame(read.csv("/Users/saraschredergomes/Desktop/GEOG693/FinalProject/BrineCompostions_ActLabsResults_RAWData.csv", stringsAsFactors = FALSE), header= FALSE, sep= ",", dec = ".", col.names = NULL) 

# for any value containing "<" (indicating uncertainty in the measurement), replace value with NA
for (col in colnames(LabData)){
    is.na(LabData[[col]]) <- startsWith(LabData[[col]], "<")
}

# exclude columns with no analyte data
for (col in colnames(LabData)){
    if (col == "Sample" || col == "Analyte.Symbol" || col == "Date.Time") 
        next
    
# define multiplier to convert units
    multiplier <- 1
    if (LabData[1,col] == "mg/L")
        multiplier <- .001
    
    # Define detection limit for an analyte
    limit <- as.numeric(LabData[2,col]) * multiplier
    
    #remove values that are less than multiplied value (detection limit)
    for(i in 1:nrow(LabData))
    {
        if (i < 3) 
            next
        if (is.na(LabData[i,col]) == FALSE && LabData[i,col] < limit)
            is.na(LabData[i,col]) <- TRUE
    }
}

```



```{r}
MajorIonLabData <- LabData %>% select(Sample,Analyte.Symbol, Na, Si, Fe, As, Cu, Cl, Mg, Ca, K, Br, SO4) #choose the ion concentrations for analysis. This makes it easy to add analytes to the shorter data frame at a later point.


for (col in colnames(LabData)){
    #create variable of uom
    #determine multiplier
    #create variable of multiplied value
    #
}
```

```{r}
REELabData <- LabData %>% select(Sample,Analyte.Symbol, Ce, Dy, Er, Eu, Gd, Ho, La, Lu, Nd, Pr, Sm, Sc,Tb, Tm, Yb, Y) #choose the ion concentrations for analysis. This makes it easy to add analytes to the shorter data frame at a later point.
```



```{r} 
#merge LabData and FieldData to one df
#to be done after unit conversions
# need a fix to include samples 9-11?
TestMerge <- merge(FieldData, BasicLabData, by.x = "Sample", by.y = "Sample")
```


--- Making site map, need states for Australia - code?

Plots: pH v. Al (each lake different color)
        pH v. Si (each lake different color)
        etc.
        Maybe, for each lake plot pH v. series of rare earth elements to see if there is one that stands out?
        Using base R: Dot plots? http://www.sthda.com/english/wiki/dot-charts-r-base-graphs



Make df and pull seawater data
Compare to LabData in plot




